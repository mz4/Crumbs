<!DOCTYPE html>
<html lang="en">
    <head>
      <script>
	// Hack for scrolling window when linking to anchor tag with fixed nav header
        var shiftWindow = function() { scrollBy(0, -75) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>JAVASCRIPT - Crumbs</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/http.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/base.js"></script> 
    </head>

    <body class="">
      
      <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
	<div class="container">
	<a class="navbar-brand" href="..">Crumbs</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
	</button>
	
	<div class="collapse navbar-collapse">
          <!-- Main navigation -->
          <ul class="nav navbar-nav">
            <li >
              <a class="nav-link" href="..">TOOLS</a>
            </li>
            <li class="active">
              <a class="nav-link" href="./">JAVASCRIPT</a>
            </li>
            <li >
              <a class="nav-link" href="../react/">REACT</a>
            </li>
            <li >
              <a class="nav-link" href="../backend/">BACKEND</a>
            </li>
            <li >
              <a class="nav-link" href="../demo/">DEMO</a>
            </li>
          </ul>
	  
          <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex">
            <li class="nav-item">
              <a class="nav-link" href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
		<i class="fa fa-search"></i> Search
              </a>
            </li>
          </ul>
	</div>
	</div>
      </nav><div id="content" class="container">
        
      <div class="row">
        <div class="col-md-9" role="main">


<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    
    <li class="breadcrumb-item active" aria-current="page">JAVASCRIPT</li>
  </ol>
</nav>


<h1 id="javascript">JAVASCRIPT</h1>
<hr />
<p><br></p>
<h2 id="how-it-works">how it works</h2>
<p><br></p>
<hr />
<p><br></p>
<h4>Javscript Engine</h4>

<p>A javascript Engine (as Google’s V8 engine) performs following two main tasks:  </p>
<h5>Creation</h5>

<ul>
<li>Setup memory space for Variables &amp; Functions - "Hoisting"  </li>
<li>Hoisting, before code is executed, the JS Engine set asides memory space for Var &amp; Func used inside the code.<br />
  ("undefined" is a special value assigned to variables that exists in the code but have not been set)</li>
</ul>
<h5>Execution</h5>

<ul>
<li>When the code is executed line-by-line (by JS interpreeter) it can access the variables defined inside Execution Context  </li>
<li>Variable assignment are done in this phase </li>
</ul>
<p><br></p>
<hr />
<p><br></p>
<h4>Creation</h4>

<p>Hoisting is JavaScript's default behavior of moving all declarations to the top of the current scope<br />
(to the top of the current script or the current function). </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Execution Context</h4>

<p>The environment in which any code run.<br />
Javscript engine wraps the code into an execution context.
<br><br>
Javscript engine creates in the Execution Context:<br />
- Global Object Window (browser)<br />
- Special Object 'this'<br />
- Ref to outer environment  </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Single Threaded & Synchonous</h4>

<p>Javascript for programmers behaves in a single threaded manner, one command at the time.<br />
And it is Synchronous, one line of code being executed at the time.</p>
<p><br></p>
<hr />
<p><br></p>
<h4>Function invocations and execution stack</h4>

<p>Anytime you execute or invoke a function in js, a new execution context is created, each execution context, has its own variable environment.<br />
"Asynchronous tasks" are placed in a so called event queue and executed only when the execution stack is empty.<br />
The event queue is constantly monitored by javascript engine.</p>
<p><br></p>
<hr />
<p><br></p>
<h4>Async event loop</h4>

<p>The job of the Event loop is to look into the call stack and determine if the call stack is empty or not. If the call stack is empty, it looks into the message queue to see if there’s any pending callback waiting to be executed.</p>
<p><br></p>
<hr />
<p><br></p>
<h2 id="scopes">Scopes</h2>
<h4>Scopes in javascript</h4>

<ul>
<li>Global Scope  </li>
<li>Local Scope  </li>
<li>Block Scope (let)  </li>
</ul>
<p><br></p>
<hr />
<p><br></p>
<h4>Old school JavaScript</h4>

<p>Traditionally, JavaScript really only has two types of scope :<br />
- Global Scope: Variables are known throughout the application, from the start of the application<br />
- Functional Scope: Variables are known within the function they are declared in, from the start of the function  </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Modern JavaScript</h4>

<p>The most recent JavaScript specs now also allow a third scope :  </p>
<p>Block Scope
Variables are known within the block they are declared in, from the moment they are declared onwards<br />
let myVariable = "Some text";<br />
const myVar = "val";  </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Difference Between Function and Block Scope</h4>

<p>Function scope is within the function. (var is function scope.)<br />
Block scope is within curly brackets. (let and const are block scope.)  </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Scope chain</h4>

<p>JavaScript engine will try to find the value of the variable in the executing code's block scope (your room) and when unable to find the value there, it will go to its lexical outer scope (your house) and if not even found there, it will go to it’s outer scope’s outer scope(your colony) until it reaches the global scope, let’s say in your case can be the country, which in context of JavaScript will be window, if your working in browser environment.</p>
<p><br></p>
<hr />
<p><br></p>
<h4>Javascript types</h4>

<p>You dont need to tell the engine what type of data a variable holds, it is going to figure it out while your code is running.</p>
<p><br></p>
<hr />
<p><br></p>
<h2 id="closures">Closures</h2>
<h4>Closures: counter</h4>

<p>A closure is an inner function that has access to the outer (enclosing) function’s variables — scope chain. The closure has three scope chains:<br />
it has access to its own scope (variables defined between its curly brackets), it has access to the outer function’s variables, and it has access to the global variables.  </p>
<pre><code class="js">&lt;script&gt;
  var updateClickCount=(function(){
  var counter=0;

  return function(){
    ++counter;
     document.getElementById(&quot;spnCount&quot;).innerHTML=counter;
    }
})();
&lt;/script&gt;

&lt;html&gt;
 &lt;button onclick=&quot;updateClickCount()&quot;&gt;click me&lt;/button&gt;
  &lt;div&gt; you have clicked 
    &lt;span id=&quot;spnCount&quot;&gt;0&lt;/span&gt;
 &lt;/div&gt;
&lt;/html&gt;
</code></pre>

<p><br></p>
<hr />
<p></br></p>
<h4>Closures example: make methods private</h4>

<pre><code class="javascript">a = (function () {
    var privatefunction = function () {
        alert('hello');
    }

    return {
        publicfunction : function () {
            privatefunction();
        }
    }
})();
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="promises">Promises</h2>
<h4>Promises</h4>

<p>Promises are one way to deal with asynchronous code.<br />
A Promise is in one of these states:  </p>
<p>Pending: initial state, neither fulfilled nor rejected.<br />
Fulfilled: meaning that the operation completed successfully.<br />
Rejected: meaning that the operation failed.  </p>
<p>A Promise object is created using the new keyword and its constructor.<br />
This constructor takes as its argument a function, called the executor function.<br />
This function should take two functions as parameters.<br />
The first (resolve) is called when the asynchronous task completes successfully and returns the results of the task as a value.<br />
The second (reject) is called when the task fails, and returns the reason for failure, which is typically an error object.  </p>
<h4>Promise example 1</h4>

<pre><code class="javascript">get('supplyData.json').then(function(response) {
  console.log(&quot;Success!&quot;, response);
}).catch(function(error) {
  console.log(&quot;Failed!&quot;, error);
})
</code></pre>

<h4>Promise example 2</h4>

<pre><code class="javascript">var promise1 = new Promise(function(resolve, reject) {
  setTimeout(function() {
    resolve('foo');
  }, 300);
});

promise1.then(function(value) {
  console.log(value);
  // expected output: &quot;foo&quot;
});

console.log(promise1);
// expected output: [object Promise]
</code></pre>

<h4>Promise example 3</h4>

<pre><code class="javascript">function myAsyncFunction(url) {
  return new Promise((resolve, reject) =&gt; {
    const xhr = new XMLHttpRequest();
    xhr.open(&quot;GET&quot;, url);
    xhr.onload = () =&gt; resolve(xhr.responseText);
    xhr.onerror = () =&gt; reject(xhr.statusText);
    xhr.send();
  });
}
</code></pre>

<h4>Promise example 4</h4>

<pre><code class="javascript">/* ES5, using Bluebird */
var isMomHappy = true;

// Promise
var willIGetNewPhone = new Promise(
    function (resolve, reject) {
        if (isMomHappy) {
            var phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone);
        } else {
            var reason = new Error('mom is not happy');
            reject(reason);
        }

    }
);

// call our promise
var askMom = function () {
    willIGetNewPhone
        .then(function (fulfilled) {
            // yay, you got a new phone
            console.log(fulfilled);
        })
        .catch(function (error) {
            // ops, mom don't buy it
            console.log(error.message);
        });
}
</code></pre>

<h4>Promise example 5 - async await</h4>

<pre><code class="javascript">/_ ES7 _/
const isMomHappy = true;

// Promise
const willIGetNewPhone = new Promise(
    (resolve, reject) =&gt; {
        if (isMomHappy) {
            const phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone);
        } else {
            const reason = new Error('mom is not happy');
            reject(reason);
        }

    }
);

// 2nd promise
async function showOff(phone) {
    return new Promise(
        (resolve, reject) =&gt; {
            var message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';

            resolve(message);
        }
    );
};

// call our promise
async function askMom() {
    try {
        console.log('before asking Mom');

        let phone = await willIGetNewPhone;
        let message = await showOff(phone);

        console.log(message);
        console.log('after asking mom');
    }
    catch (error) {
        console.log(error.message);
    }
}

(async () =&gt; {
    await askMom();
})();
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="callback">Callback</h2>
<h4>Callback, Promises and Async</h4>

<h4>Callback:</h4>

<p>A callback is a function that is passed to another function.<br />
When the first function is done, it will run the second function.  </p>
<p>Print a string after a random amount of time:</p>
<pre><code class="js">function printString(string, callback){
  setTimeout(
    () =&gt; {
      console.log(string)
      callback()
    }, 
    Math.floor(Math.random() * 100) + 1
  )
}
</code></pre>

<p>Let’s try to print the letters A, B, C in that order:</p>
<pre><code class="js">function printAll(){
  printString(&quot;A&quot;, () =&gt; {
    printString(&quot;B&quot;, () =&gt; {
      printString(&quot;C&quot;, () =&gt; {})
    })
  })
}
printAll()
</code></pre>

<hr />
<p>Callback functions  </p>
<p>setInterval</p>
<pre><code class="js">setInterval(function(){
  console.log('hello);
}, 1000);
</code></pre>

<pre><code class="js">const list = ['uno', 'due', 'tre'];

const newList = list.map(function(v) {
  return v + 'a';
}).filter(function(v) {
  return v.value &gt; 'aa';
}
)
</code></pre>

<pre><code class="js">button.addEventListener('click', function(e){
  ...
})
</code></pre>

<pre><code class="js">setTimeout(func, 1000);
</code></pre>

<pre><code class="js">Object.entries(users).forEach(entry, val) =&gt;
{
  const [key, value] = entry;
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Promises vs callaback</h4>

<p>Promises try to fix callback nesting problem. 
In our function lets use Promises:</p>
<pre><code class="js">function printString(string){
  return new Promise((resolve, reject) =&gt; {
    setTimeout(
      () =&gt; {
       console.log(string)
       resolve()
      }, 
     Math.floor(Math.random() * 100) + 1
    )
  })
}
</code></pre>

<pre><code class="js">function printAll(){
  printString(&quot;A&quot;)
  .then(() =&gt; {
    return printString(&quot;B&quot;)
  })
  .then(() =&gt; {
    return printString(&quot;C&quot;)
  })
}
printAll()
</code></pre>

<h4>Await:</h4>

<pre><code class="js">async function printAll(){
  await printString(&quot;A&quot;)
  await printString(&quot;B&quot;)
  await printString(&quot;C&quot;)
}
printAll()
</code></pre>

<p><br></p>
<hr />
<p></br></p>
<h2 id="http-requests">Http Requests</h2>
<h4>Http Requests</h4>

<p>Fetch</p>
<pre><code class="js">fetch(&quot;https://jsonplaceholder.typicode.com/todos/1&quot;)
  .then(response =&gt; response.json())
  .then(json =&gt; console.log(json));
</code></pre>

<p>Fetch + other params</p>
<pre><code class="js">const url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;

const otherParam = {
  headers: {
    &quot;content-type&quot;: &quot;application/json; charset=UTF-8&quot;
  },
  method: &quot;GET&quot;
};

fetch(url, otherParam)
  .then(data =&gt; {
    return data.json();
  })
  .then(ret =&gt; console.log(ret))
  .catch(error =&gt; console.log(error));
</code></pre>

<p>Axios</p>
<pre><code class="js">const url = &quot;https://jsonplaceholder.typicode.com/posts&quot;;

const reqParam = {
  headers: {
    &quot;content-type&quot;: &quot;application/json; charset=UTF-8&quot;
  },
  method: &quot;GET&quot;
};

axios
  .get(url, reqParam)
  .then(data =&gt; console.log(data))
  .catch(err =&gt; console.log(err));
</code></pre>

<p>axios async/await</p>
<pre><code class="js">async function getUser() {
  try {
    const response = await axios.get('/user?ID=12345');
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
</code></pre>

<p>multiple concurrent requests</p>
<pre><code class="js">function getUserAccount() {
  return axios.get('/user/12345');
}

function getUserPermissions() {
  return axios.get('/user/12345/permissions');
}

axios.all([getUserAccount(), getUserPermissions()])
  .then(axios.spread(function (acct, perms) {
    // Both requests are now complete
  }));
</code></pre>

<h4>Various examples of Loops, Promises, callback</h4>

<p>Promise</p>
<pre><code class="javascript">const promise = new Promise (
  function(resolve, reject) {
    if (...something) {
      resolve('data');
    }
    if (...somethingelse) {
      reject('error');
    }
  }
)

promise.then(
  function(data) {...}
).catch(
  function(error) {...}
)
</code></pre>

<p>Axios<br />
<a href="https://kapeli.com/cheat_sheets/Axios.docset/Contents/Resources/Documents/index">Axios cheatsheet</a><br />
<a href="https://github.com/axios/axios">Axios github</a><br />
<a href="https://blog.logrocket.com/how-to-make-http-requests-like-a-pro-with-axios/">Axios making http requests</a></p>
<pre><code class="javascript">axios.get('http://.....')
  .then(
    function(response) {
      ....
    }
  )
  .catch(
    function(error) {
      ....
    }
  )
  .finally(
    function() {
      ....
    }
  )
</code></pre>

<pre><code class="js">async function getUser() {
  try {
    const output = await axios.get()
  }
  catch {
    ...
  }
}
</code></pre>

<p>Axios patch example</p>
<pre><code class="javascript">  axios
    .patch(
      url,
      formData,
      {
        headers: {
          'X-Auth-Token': token
      },
    })
    .then((data) =&gt; {
      this.props.loadAccountsData();
    })
    .catch(error =&gt; {
      throw error;
    });
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="prototypes">Prototypes</h2>
<h4>Prototypes</h4>

<p><a href="https://tylermcginnis.com/beginners-guide-to-javascript-prototype/">Prototype link</a><br />
The prototype is an object that is associated with every functions and objects by default in JavaScript.
Every object in javascript includes '<strong>proto</strong>' property that points to prototype object of a function that created this object.
The prototype object is being used by JavaScript engine in two things, 
1) to find properties and methods of an object 
2) to implement inheritance in JavaScript.</p>
<pre><code class="javascript">function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10)
</code></pre>

<p>JS prototype Inheritance</p>
<pre><code class="js">function Dog(name, energy, age, breed) {
  Animal.call(this, name, energy)
  this.age = age
  this.breed= breed
}

Dog.prototype = Object.create(Animal.prototype)

Dog.prototype.bark = function() {
  console.log('bark')
}

Dog.prototype.constructor = Dog;
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="es6-syntax">ES6 Syntax</h2>
<h4>ES6 syntax</h4>

<p>In 2015, EcmaScript (the official JavaScript specification) 6 was released with support for Classes and the class keyword.<br />
Let’s see how our Animal constructor function above would look like with the new class syntax.</p>
<pre><code class="javascript">class Animal {
  constructor(name, energy) {
    this.name = name
    this.energy = energy
  }
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  }
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  }
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10)
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Arrays</h4>

<p>Arrays is javascript are dynamically typed, and can contain different type of data</p>
<pre><code class="javascript">var arr = [
    1, 
    false, 
    {
        name: 'Tony',
        address: '111 Main St.'
    },
    function(name) {
        var greeting = 'Hello ';
        console.log(greeting + name);
    },
    &quot;hello&quot;
];

console.log(arr);
arr[3](arr[2].name);
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Array methods</h4>

<p>See all the array’s methods by simply logging Array.prototype.<br />
console.log(Array.prototype)</p>
<pre><code class="js">  concat: ƒn concat()
  constructor: ƒn Array()
  copyWithin: ƒn copyWithin()
  entries: ƒn entries()
  every: ƒn every()
  fill: ƒn fill()
  filter: ƒn filter()
  find: ƒn find()
  findIndex: ƒn findIndex()
  forEach: ƒn forEach()
  includes: ƒn includes()
  indexOf: ƒn indexOf()
  join: ƒn join()
  keys: ƒn keys()
  lastIndexOf: ƒn lastIndexOf()
  length: 0n
  map: ƒn map()
  pop: ƒn pop()
  push: ƒn push()
  reduce: ƒn reduce()
  reduceRight: ƒn reduceRight()
  reverse: ƒn reverse()
  shift: ƒn shift()
  slice: ƒn slice()
  some: ƒn some()
  sort: ƒn sort()
  splice: ƒn splice()
  toLocaleString: ƒn toLocaleString()
  toString: ƒn toString()
  unshift: ƒn unshift()
  values: ƒn values()
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Find highest value in an array</h4>

<pre><code class="js">const max = data.reduce((prev, current) =&gt; (prev.y &gt; current.y) ? prev : current)
</code></pre>

<h4>setState spread operator</h4>

<pre><code class="js">    trips: [
      {
        id: 0,
        name: 'Rome',
        dateStart: '19/08/2019',
        dateEnd: '29/08/2019',
        isConfirmed: false,
        isEditing: false
      },
      {
        id: 1,
        name: 'Paris',
        dateStart: '15/06/2019',
        dateEnd: '29/06/2019',
        isConfirmed: true,
        isEditing: false
      },
      {
        id: 2,
        name: 'Malta',
        dateStart: '01/02/2019',
        dateEnd: '08/02/2019',
        isConfirmed: false,
        isEditing: false
      },
      {
        id: 3,
        name: 'Budapest',
        dateStart: '01/02/2019',
        dateEnd: '08/02/2019',
        isConfirmed: false,
        isEditing: false
      }
    ]
</code></pre>

<pre><code class="js">  handleDateStart = e =&gt;
    this.setState({
      form: {
        ...this.state.form,
        dateStart: e.target.value
      }
    });
</code></pre>

<p><br></p>
<hr />
<p></br></p>
<h2 id="this">This</h2>
<h4>'this' keyword</h4>

<p>It's a special identifier keyword that's automatically defined in the scope of every function.  <br />
'this' will be pointing at different objects, depending on where the function is and how it is called.</p>
<pre><code class="js">function a() {
    console.log(this);
    this.newvariable = 'hello';
}

var b = function() {
    console.log(this);   
}

a();

console.log(newvariable); // not good!

b();

var c = {
    name: 'c object',
    log: function() {
        var self = this;

        self.name = 'Updated c object';
        console.log(self);

        var setname = function(newname) {
            self.name = newname;   
        }
        setname('Updated again! The c object');
        console.log(self);
    }
}

c.log();
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Determine "this"</h4>

<p>Is the function called with new (new binding)? 
If so, 'this' is the newly constructed object.</p>
<pre><code class="js">var bar = new foo()
</code></pre>

<p>Is the function called with call or apply (explicit binding), even hidden inside a bind hard binding? 
If so, 'this' is the explicitly specified object.</p>
<pre><code class="js">var bar = foo.call( obj2 )
</code></pre>

<p>Is the function called with a context (implicit binding), otherwise known as an owning or containing object? 
If so, 'this' is that context object.</p>
<pre><code class="js">var bar = obj1.foo()
</code></pre>

<p>Otherwise, default the this (default binding). If in strict mode, pick undefined, otherwise pick the global object.</p>
<pre><code class="js">var bar = foo()
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Default binding</h4>

<p>Standalone function invocation. In this case "this" points at the global object.  </p>
<pre><code class="javascript">function foo() {
    console.log( this.a );
}

var a = 2;

foo(); // 2
</code></pre>

<h4>Implicit Binding</h4>

<p>Because obj is the this for the foo() call, this.a is synonymous with obj.a.  </p>
<pre><code class="javascript">function foo() {
    console.log( this.a );
}

var obj = {
    a: 2,
    foo: foo
};

obj.foo(); // 2
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Explicit Binding</h4>

<p>All functions you will create, do have access to call(..) and apply(..).
How do these utilities work? They both take, as their first parameter, an object to use for the this, and then invoke the  function with that this specified. 
Since you are directly stating what you want the this to be, we call it explicit binding.  </p>
<p>example with call</p>
<pre><code class="javascript">function foo() {
    console.log( this.a );
}

var obj = {
    a: 2
};

foo.call( obj ); // 2
</code></pre>

<p>example with apply</p>
<pre><code class="js">var obj = {name:&quot;Niladri&quot;};
var greeting = function(a,b,c){
    return &quot;welcome &quot;+this.name+&quot; to &quot;+a+&quot; &quot;+b+&quot; in &quot;+c;
};
// array of arguments to the actual function
var args = [&quot;Newtown&quot;,&quot;KOLKATA&quot;,&quot;WB&quot;];  
console.log(&quot;Output using .apply() below &quot;)
console.log(greeting.apply(obj,args));
/* The output will be 
  Output using .apply() below
 welcome Niladri to Newtown KOLKATA in WB */
</code></pre>

<p>apply() method sets the "this" value which is the object upon which the function is invoked. 
The only difference of apply() with the call() method is that the second parameter of the apply() method accepts the arguments to the actual function as an array.</p>
<h4>new Binding</h4>

<p>In JS, constructors are just functions that happen to be called with the new operator in front of them.<br />
They are not attached to classes, nor are they instantiating a class.<br />
They are not even special types of functions.<br />
So new is the final way that a function call's this can be bound. We'll call this new binding.</p>
<pre><code class="javascript">function foo(a) {
    this.a = a;
}

var bar = new foo( 2 );
console.log( bar.a ); // 2
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Bind</h4>

<p>We use the Bind () method primarily to call a function with the this value set explicitly.<br />
In other words, bind () allows us to easily set which specific object will be bound to this when a function or method is invoked.</p>
<pre><code class="js">var obj = {name:&quot;Leo&quot;};
var greeting = function(a, b){
    return &quot;Hello &quot;+ this.name + &quot; to &quot; + a + &quot; &quot; + b;
};
var bound = greeting.bind(obj); 
console.log(bound(&quot;a&quot;, &quot;b&quot;));
/* Output: welcome Leo to a b */
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="objects">Objects</h2>
<h4>Objects</h4>

<p>Objects come in two forms: the declarative (literal) form, and the constructed form.<br />
Note: It's extremely uncommon to use the "constructed form" for creating objects as just shown.<br />
You would pretty much always want to use the literal syntax form.  </p>
<p>Literal:  </p>
<pre><code class="javascript">var myObj = {
    key: value
    // ...
};
</code></pre>

<p>Constructed:    </p>
<pre><code class="javascript">var myObj = new Object();
myObj.key = value;
</code></pre>

<hr />
<h4>Object Types</h4>

<ul>
<li>string</li>
<li>number</li>
<li>boolean</li>
<li>null</li>
<li>undefined</li>
<li>object</li>
</ul>
<p><br></p>
<hr />
<p><br></p>
<h2 id="design-patterns">Design Patterns</h2>
<h4>Design Patterns</h4>

<ul>
<li>Module Patterns</li>
<li>Revealing Module Patterns</li>
<li>Constructor</li>
<li>Constructor with Prototypes</li>
<li>Prototype Pattern</li>
</ul>
<p><br></p>
<h4>Module Pattern</h4>

<p>The module pattern allows for public and private access levels.</p>
<p>Modules should be Immediately-Invoked-Function-Expressions (IIFE) to allow for private scopes. 
A closure that protect variables and methods.</p>
<pre><code class="js">(function() {

  // Declare private variables/functions

  return {
    // Declare public variables/functions
  }

})()
</code></pre>

<p>example:</p>
<pre><code class="js">var contentLog = (function(){

  var content = 'Good Morning'

  var changeHtml = function() {
    var element = document.getElementById('appId')
    element.innerHTML = content;
  }

  return {
    callChangeHtml: function() {
      changeHtml()
      console.log(content)
    }
  }
})();

contentLog.callChangeHtml();
</code></pre>

<p><br></p>
<h4>Revealing Module Pattern</h4>

<p>The purpose is to maintain encapsulation and reveal certain variables and methods returned in an object literal.</p>
<pre><code class="js">var Exposer = (function() {
  var privateVar = 10;

  var privateMethod = function() {
    privateVar++
  }

  var publicMethodOne = function() {
    console.log('this is an exposed method 1')
  }

  var publicMethodTwo = function() {
    console.log('this is an exposed method 2')
  }

  return {
    first: publicMethodOne,
    two: publicMethodTwo
  }

})()

Exposer.first();
Exposer.second();

</code></pre>

<h4>Protype Design Pattern</h4>

<p>Creates objects based on a template of an existing object through cloning.
The pattern an easy way to implement inheritance.
Two separate instances are actually referencing the same functions!</p>
<pre><code class="js">const User = function(name) {
  this.name = name
  this.age = 100
}

User.prototype.bash = function(target) {
  target.age -= 15
}

User.prototype.omniSlash = function(target) {
  if (target.hp &lt; 50) {
    return
  }
  target.hp -= 50
}

const sam = new User('Sam')
const lella = new User('Lella')

console.log(sam.bash === lella.bash)
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="es6">ES6</h2>
<h4>Spread Operator 1</h4>

<pre><code class="javascript">const userInfo = { isAuthenticated: false }  
const action = { isAuthenticated: true, type: 'nope' }  
const res = { ...userInfo, isAuthenticated: action.isAuthenticated };   
console.log(res);  // { isAuthenticated: true } 
</code></pre>

<h4>Spread Operator 2</h4>

<pre><code class="javascript">var mid = [3, 4];  
var arr = [1, 2, ...mid, 5, 6];  
console.log(arr);  // [ 1, 2, 3, 4, 5, 6 ]
</code></pre>

<h4>Spread Operator 3</h4>

<pre><code class="javascript">let nums = [1, 2, 3];
let abcs = ['a', 'b', 'c'];
let alphanum = [ ...nums, ...abs ]; // [1, 2, 3, 'a', 'b', 'c']
</code></pre>

<h4>Destructuring 1</h4>

<pre><code class="javascript">var address = {
  city: &quot;London&quot;,
  state: &quot;UK&quot;,
  zip: 1334
};
let {city, state, zip} = address;

log(city); // 'London'
log(state); // 'UK'
log(zip); // 1334```
</code></pre>

<h4>Destructuring 2</h4>

<pre><code class="js">var address = {
  city: &quot;London&quot;,
  state: &quot;UK&quot;,
  zip: 1334
};
let {city: c, state: s, zip: z} = address;
log(c, s, z);
</code></pre>

<h4>Destructuring 3</h4>

<pre><code class="javascript">var person = {name: 'Aaaaaa', age: 35};
displayPerson(person);

function displayPerson({name, age}) {
  ...
}```

&lt;h4&gt;Destructuring 4&lt;/h4&gt;
```javascript
var person = {name: 'Aaaaaa', age: 35};
let {name, age, address} = person; // error!
let {name, age, ?address} = person; // OK
let ?{name, age, address} = person; // OK
</code></pre>

<h4>Destructuring 5</h4>

<pre><code class="javascript">var nums = [1, 2, 3, 4];
doSomething(nums);

function doSomething([first, second, ...others]){
  log(first);   //logs 1
  log(second);  //logs 2
  log(others);  //logs [3, 4]
}
</code></pre>

<h4>Arrow functions 1</h4>

<p>Specifying parameters:</p>
<pre><code class="javascript">    () =&gt; { ... } // no parameter
     x =&gt; { ... } // one parameter, an identifier
(x, y) =&gt; { ... } // several parameters
</code></pre>

<h4>Specifying a body:</h4>

<pre><code class="javascript">x =&gt; { return x * x }  // block
x =&gt; x * x  // expression, equivalent to previous line
</code></pre>

<h4>Arrow function 2</h4>

<pre><code class="javascript">const phraseSplitterEs6 = phrase =&gt; phrase.split(&quot; &quot;);
</code></pre>

<h4>Arrow function 3</h4>

<pre><code class="javascript">var docLogEs6 = () =&gt; { console.log(document); };
</code></pre>

<h4>Arrow function 4</h4>

<pre><code class="javascript">const smartPhones = [
  { name:'iphone', price:649 },
  { name:'Galaxy S6', price:576 },
  { name:'Galaxy Note 5', price:489 }
];

// ES6
const prices = smartPhones.map(smartPhone =&gt; smartPhone.price);
console.log(prices); // [649, 576, 489]
</code></pre>

<h4>Nested keys</h4>

<p>Check existance of nested keys.</p>
<pre><code class="js">var update_progress = (((data || {}).Oem || {}).Name || {}).UpdateProgress;
if (update_progress !== null) {
    console.log(JSON.stringify(data));
}
</code></pre>

<h4>Difference setInterval and setTimeout</h4>

<p>setTimeout(): It is a function that execute a JavaScript statement AFTER x interval.</p>
<pre><code class="js">setTimeout(function () {
    something();
}, 1000); // Execute something() 1 second later.
</code></pre>

<p>setInterval(): It is a function that execute a JavaScript statement EVERY x interval.</p>
<pre><code class="js">setInterval(function () {
    somethingElse();
}, 2000); // Execute somethingElse() every 2 seconds.
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Performance analysis</h4>

<pre><code class="js">console.time(&quot;start&quot;);
</code></pre>

<p>// do something</p>
<pre><code class="js">console.timeEnd(&quot;end&quot;)
</code></pre>

<p>// this will cause the browser to print time elapsed between start and end.</p>
<p><br></p>
<hr />
<p><br></p>
<h2 id="typescript">TYPESCRIPT</h2>
<ul>
<li>It is a typed superset of Javascript that compiles to plain JavaScript.  </li>
<li>A variable in JavaScript can have any type of value such as string, number, boolean etc.<br />
  The type system increases the code quality, readability and makes it an easy to maintain and refactor code base.  </li>
<li>Errors can be caught at compile time rather than at run time.  </li>
<li>TypeScript is that it allows JavaScript to be used at scale.  </li>
</ul>
<h4>Links</h4>

<ul>
<li>https://www.sitepoint.com/react-with-typescript-best-practices/</li>
<li>https://github.com/typescript-cheatsheets/react-typescript-cheatsheet</li>
<li>https://www.typescriptlang.org/docs/handbook/basic-types.html</li>
<li>https://fettblog.eu/typescript-react/</li>
<li>https://marketplace.visualstudio.com/items?itemName=infeng.vscode-react-typescript</li>
</ul>
<p><br></p>
<hr />
<p><br></p>
<h4>TSLint-React</h4>

<p>Install typescript,tslint and tslint-react packages globally  </p>
<pre><code>yarn global add tslint typescript tslint-react
</code></pre>

<h4>Now inside your project directory, initialise tslint</h4>

<pre><code>tslint --init
</code></pre>

<h4>Configuration tslint</h4>

<pre><code class="ts">{
    &quot;defaultSeverity&quot;: &quot;error&quot;,
    &quot;extends&quot;: [
        &quot;tslint-react&quot;
    ],
    &quot;jsRules&quot;: {
    },
    &quot;rules&quot;: {
        &quot;member-access&quot;: false,
        &quot;ordered-imports&quot;: false,
        &quot;quotemark&quot;: false,
        &quot;no-console&quot;: false,
        &quot;semicolon&quot;: false,
        &quot;jsx-no-lambda&quot;: false
    },
    &quot;rulesDirectory&quot;: [
    ],
    &quot;linterOptions&quot;: {
        &quot;exclude&quot;: [
            &quot;config/**/*.js&quot;,
            &quot;node_modules/**/*.ts&quot;
       ]
   }
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Applying interfaces to components</h4>

<pre><code class="js">interface FormState {
    submitted?: boolean;
    full_name: string;
    age: number;
}
</code></pre>

<pre><code class="js">export class MyForm extends React.Component&lt;FormProps, FormState&gt; {
   ...
}
</code></pre>

<h4>functional components</h4>

<pre><code class="js">function MyForm(props: FormProps) {
  ...
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Import/Export Interfaces</h4>

<p>export  </p>
<pre><code class="js">// src/types/index.tsx
export interface FormProps {
    first_name: string;
    last_name: string;
    age: number;
    agreetoterms?: boolean;
}
</code></pre>

<p>import  </p>
<pre><code class="js">// src/components/MyForm.tsx
import React from 'react';
import { StoreState } from '../types/index';
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>enum</h4>

<p>Check whether the submitted form value is valid.</p>
<pre><code class="js">// define enum
enum HeardFrom {
    SEARCH_ENGINE = &quot;Search Engine&quot;,
    FRIEND = &quot;Friend&quot;,
    OTHER = &quot;Other&quot;
}
//construct heardFrom array
let heardFrom = [HeardFrom.SEARCH_ENGINE, 
                 HeardFrom.FRIEND, 
                 HeardFrom.OTHER];

//get submitted form value
const submitted_heardFrom = form.values.heardFrom;

//check if value is valid
heardFrom.includes(submitted_heardFrom)
   ? valid = true
   : valid = false;
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Using Typescript with React</h4>

<h4>React Component with typescript</h4>

<pre><code class="ts">import * as React from 'react'

export interface StandardComponentProps {
  title?: string
  children: React.ReactNode
}

export function StandardComponent({
  children,
  title = 'Dr.',
}: StandardComponentProps) {
  return (
    &lt;div&gt;
      {title}: {children}
    &lt;/div&gt;
  )
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Interface for Redux Store</h4>

<pre><code class="js">// src/types/index.tsx
export interface MyStore {
    language: string;
    country: string;
    auth: {
        authenticated: boolean;
        username?: string;
    };
}
</code></pre>

<h4>Define Action type and actions</h4>

<pre><code class="js">// src/constants/index.tsx
export const SET_LANGUAGE = 'INCREMENT_ENTHUSIASM';
export type SET_LANGUAGE = typeof SET_LANGUAGE;
export const SET_COUNTRY = 'SET_COUNTRY';
export type SET_COUNTRY = typeof SET_COUNTRY;
export const AUTHENTICATE = 'AUTHENTICATE';
export type AUTHENTICATE = typeof AUTHENTICATE;
</code></pre>

<p>These const &amp; type objects can now be imported into your src/actions/index.tsx file,<br />
where we can define action interfaces and the actions themselves, and typing them along the way:  </p>
<pre><code class="js">// src/actions/index.tsx
import * as constants from '../constants';
//define action interfaces
export interface SetLanguage {
    type: constants.SET_LANGUAGE;
    language: string;
}
export interface SetCountry {
    type: constants.SET_COUNTRY;
    country: string;
}
export interface Authenticate{
    type: constants.AUTHENTICATE;
    username: string;
    pw: string;
}
//define actions
export function setLanguage(l: string): SetLanguage ({
   type: constants.SET_LANGUAGE,
   language: l
});
export function setCountry(c: string): SetCountry ({
   type: constants.SET_COUNTRY,
   country: c
});
export function authenticate(u: string, pw: string): Authenticate ({
   type: constants.SET_COUNTRY,
   username: u,
   pw: pw
});
</code></pre>

<p>Back in our actions file, add a union type for locality under our interfaces:  </p>
<pre><code class="js">// src/actions/index.tsx
export type Locality = SetLanguage | SetCountry;
</code></pre>

<pre><code class="js">// src/reducers/index.tsx
import { Locality } from '../actions';
import { StoreState } from '../types/index';
import { SET_LANGUAGE, SET_COUNTRY, AUTHENTICATE} from '../constants/index';
export function locality(state: StoreState, action: Locality):     StoreState {

  switch (action.type) {
    case SET_LANGUAGE:
      return return { ...state, language: action.language};
    case SET_COUNTRY:
      return { ...state, language: action.country};
    case AUTHENTICATE:
      return { 
         ...state, 
         auth: {
            username: action.username, 
            authenticated: true 
          }
      };
   }
  return state;
}
</code></pre>

<h4>Creating initial store</h4>

<pre><code class="js">// src/index.tsx
import { createStore } from 'redux';
import { locality } from './reducers/index';
import { StoreState } from './types/index';
const store = createStore&lt;StoreState&gt;(locality, {
   language: 'British (English)',
   country: 'United Kingdom',
   auth: {
       authenticated: false
   }
});
</code></pre>

<h4>MapState and Dispatch</h4>

<pre><code class="js">// mapStateToProps example
import { StoreState } from '../types/index';
interface LocalityProps = {
    country: string;
    language: string;
}
function mapStateToProps (state: StoreState, ownProps: LocalityProps) ({
     language: state.language,
     country: state.country,
});
</code></pre>

<h4>MapDispatchToProps</h4>

<pre><code class="js">// mapDispatchToProps example
const mapDispatchToProps = {
   actions.setLanguage,
   actions.setCountry
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="utilities">Utilities</h2>
<h4>Check if an object is empty</h4>

<pre><code class="javascript">function isEmpty(obj) {
    for(var key in obj) {
        if(obj.hasOwnProperty(key))
            return false;
    }
    return true;
}
</code></pre>

<pre><code class="javascript">var myObj = {}; // Empty Object
if(isEmpty(myObj)) {
    // Object is empty (Would return true in this example)
} else {
    // Object is NOT empty
}
</code></pre>

<pre><code class="js">index = 0; 
array = [ 1, 2, 3, 4, 5, 6 ]; 

const under_five = x =&gt; x &lt; 5; 

if (array.every(under_five)) { 
    console.log('All are less than 5'); 
} 
else { 
    console.log('At least one element is not less than 5'); 
} 
</code></pre>

<h4>Object is an array?</h4>

<pre><code class="js">var d = []
console.log(Object.prototype.toString.call(d));
</code></pre>

<h4>Loops</h4>

<p>For loop</p>
<pre><code class="js">array = [ 1, 2, 3, 4, 5, 6 ]; 
for (index = 0; index &lt; array.length; index++) { 
  console.log(array[index]); 
} 
</code></pre>

<p>While</p>
<pre><code class="js">index = 0; 
array = [ 1, 2, 3, 4, 5, 6 ]; 

while (index &lt; array.length) { 
    console.log(array[index]); 
    index++; 
}
</code></pre>

<p>ForEach</p>
<pre><code class="js">index = 0; 
array = [ 1, 2, 3, 4, 5, 6 ]; 

array.forEach(myFunction); 
function myFunction(item, index) 
{ 
  console.log(item); 
}
</code></pre>

<p>Every</p>
<pre><code class="js">index = 0; 
array = [ 1, 2, 3, 4, 5, 6 ]; 

const under_five = x =&gt; x &lt; 5; 

if (array.every(under_five)) { 
    console.log('All are less than 5'); 
} 
else { 
    console.log('At least one element is not less than 5'); 
} 
</code></pre>

<p>Map</p>
<pre><code class="js">index = 0; 
array = [ 1, 2, 3, 4, 5, 6 ]; 

square = x =&gt; Math.pow(x, 2); 
squares = array.map(square); 
console.log(array); 
console.log(squares);
</code></pre>

<h4>Pseudo Code</h4>

<pre><code class="js">function calculate_gpa
  pass in student_grades
  set grade_total to 0
  for each grade in student_grades
      if grade is not a 1, 2, 3, or 4
          print &quot;invalid grade&quot;
          print grade
          print &quot;can't complete calculation&quot;
          exit function
      else add grade to grade_total
      endif
   endfor
   set gpa to grade_total / number of grades
   return gpa
endfunction

set reggie_grades to 4, 4, 3, 4
set reggie_gpa to call calculate_gpa with reggie_grades
print reggie_gpa
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="graphql">GRAPHQL</h2>
<h4>About</h4>

<p>GraphQL is a query language for your API, and a server-side runtime for executing queries by using a type system you define for your data.  </p>
<ul>
<li>Open source and created by Facebook  </li>
<li>Gives clients the power to describe exactly what data they want  </li>
<li>Can sit in front of any existing API because its just a query language  </li>
</ul>
<p>REST APIs have shown to be too inflexible to keep up with the rapidly changing requirements of the clients that access them.<br />
GraphQL was developed to cope with the need for more flexibility and efficiency! It solves many of the shortcomings and inefficiencies that developers experience when interacting with REST APIs.<br />
When working with REST APIs, data is loaded from specific endpoints.<br />
Instead of having multiple endpoints that return fixed data structures, GraphQL APIs typically only expose a single endpoint. This works because the structure of the data that’s returned is not fixed. Instead, it’s completely flexible and lets the client decide what data is actually needed.</p>
<h4>GraphQL vs REST</h4>

<ul>
<li>GraphQL only has one URL.<br />
  Request details are in a POST body (or GET)  </li>
<li>In REST, shape and size of data resource is determined by the server,<br />
  In Graphql its determined by the query (request)  </li>
<li>In REST, you have to male multiple API calls to retrieve relational data,<br />
  in GraphQL you can start with entry resource and traverse all the connections in one request  </li>
<li>In REST, the shape of the response is determined by whom ever created the server, <br />
  in GraphQL the shape is determined by the query  </li>
</ul>
<h4>Terminology</h4>

<p>- Query - Queries specify which endpoints we want to call, how we want the response to look<br />
- Fields - Properties that comprise the shape of a response<br />
- Type - A collection of fields that make up a specific queryable object.<br />
- Mutation - A special kind of GraphQL query that causes changes to the data available on the backend<br />
- Schema - A special kind of document that describes how a GraphQL endpoint can receive and send information<br />
- Query Language - The syntax we use to write GraphQL queries that retrieve data from an endpoint<br />
- Self-documenting API - An API that can be easily understood just by reading its schema -- no extra documentation needed  </p>
<h4>Basic Query</h4>

<pre><code class="js">{
  allPersons {
    name
  }
}
</code></pre>

<p>allPersons is called the root field of the query.<br />
Everything that follows the root field, is called the payload of the query.  </p>
<p>This will return:</p>
<pre><code class="js">{
  &quot;allPersons&quot;: [
    { &quot;name&quot;: &quot;Johnny&quot; },
    { &quot;name&quot;: &quot;Sarah&quot; },
    { &quot;name&quot;: &quot;Alice&quot; }
  ]
}
</code></pre>

<p>it allows for naturally querying nested information.</p>
<pre><code class="js">{
  allPersons {
    name
    age
    posts {
      title
    }
  }
}
</code></pre>

<p>Each field can have zero or more arguments if that’s specified in the schema.<br />
For example, the allPersons field could have a last parameter to only return up to a specific number of persons. </p>
<pre><code class="js">{
  allPersons(last: 2) {
    name
  }
}
</code></pre>

<h4>Testing Graphql Query</h4>

<p>from: https://www.apollographql.com/docs/react/development-testing/testing/</p>
<p>Consider component:</p>
<pre><code class="js">import React from 'react';
import gql from 'graphql-tag';
import { Query } from 'react-apollo';

// Make sure the query is also exported -- not just the component
export const GET_DOG_QUERY = gql`
  query getDog($name: String) {
    dog(name: $name) {
      id
      name
      breed
    }
  }
`;

export const Dog = ({ name }) =&gt; (
  &lt;Query query={GET_DOG_QUERY} variables={{ name }}&gt;
    {({ loading, error, data }) =&gt; {
      if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
      if (error) return &lt;p&gt;Error!&lt;/p&gt;;

      return (
        &lt;p&gt;
          {data.dog.name} is a {data.dog.breed}
        &lt;/p&gt;
      );
    }}
  &lt;/Query&gt;
);
</code></pre>

<p>Unit tests:</p>
<pre><code class="js">it('should show error UI', async () =&gt; {
  const dogMock = {
    request: {
      query: GET_DOG_QUERY,
      variables: { name: 'Buck' },
    },
    error: new Error('aw shucks'),
  };

  const component = renderer.create(
    &lt;MockedProvider mocks={[dogMock]} addTypename={false}&gt;
      &lt;Dog name=&quot;Buck&quot; /&gt;
    &lt;/MockedProvider&gt;,
  );

  await wait(0); // wait for response

  const tree = component.toJSON();
  expect(tree.children).toContain('Error!');
});
</code></pre>

<h4>Mutations</h4>

<p>It allows to create, update and delete data.
Create a new Person:</p>
<pre><code class="js">mutation {
  createPerson(name: &quot;Bob&quot;, age: 36) {
    name
    age
  }
}
</code></pre>

<p>GraphQL types have unique IDs that are generated by the server when new objects are created:</p>
<pre><code class="js">type Person {
  id: ID!
  name: String!
  age: Int!
}
</code></pre>

<p>Directly ask for the id in the payload of the mutation</p>
<pre><code class="js">mutation {
  createPerson(name: &quot;Alice&quot;, age: 36) {
    id
  }
}
</code></pre>

<h4>Testing Graphql mutations</h4>

<p>Component</p>
<pre><code class="js">export const DELETE_DOG_MUTATION = gql`
  mutation deleteDog($name: String!) {
    deleteDog(name: $name) {
      id
      name
      breed
    }
  }
`;

export const DeleteButton = () =&gt; (
  &lt;Mutation mutation={DELETE_DOG_MUTATION}&gt;
    {(mutate, { loading, error, data }) =&gt; {
      if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
      if (error) return &lt;p&gt;Error!&lt;/p&gt;;
      if (data) return &lt;p&gt;Deleted!&lt;/p&gt;;

      return (
        &lt;button onClick={() =&gt; mutate({ variables: { name: 'Buck' } })}&gt;
          Click me to Delete Buck!
        &lt;/button&gt;
      );
    }}
  &lt;/Mutation&gt;
);
</code></pre>

<p>Tests</p>
<pre><code class="js">it('should delete and give visual feedback', async () =&gt; {
  const deleteDog = { name: 'Buck', breed: 'Poodle', id: 1 };
  const mocks = [
    {
      request: {
        query: DELETE_DOG_MUTATION,
        variables: { name: 'Buck' },
      },
      result: { data: { deleteDog } },
    },
  ];

  const component = renderer.create(
    &lt;MockedProvider mocks={mocks} addTypename={false}&gt;
      &lt;DeleteButton /&gt;
    &lt;/MockedProvider&gt;,
  );

  // find the button and simulate a click
  const button = component.root.findByType('button');
  button.props.onClick(); // fires the mutation

  await wait(0);

  const tree = component.toJSON();
  expect(tree.children).toContain('Deleted!');
});
</code></pre>

<h4>Subscriptions</h4>

<p>Realtime connection to the server in order to get immediately informed about important events.<br />
Subscriptions represent a stream of data sent over to the client.  </p>
<p>Subscribe on events happening on the Person type:  </p>
<pre><code class="js">subscription {
  newPerson {
    name
    age
  }
}
</code></pre>

<p>After a client sent this subscription to a server, a connection is opened between them.<br />
Then, whenever a new mutation is performed that creates a new Person, the server sends the information about this person over to the client:  </p>
<pre><code class="js">{
  &quot;newPerson&quot;: {
    &quot;name&quot;: &quot;Jane&quot;,
    &quot;age&quot;: 23
  }
}
</code></pre>

<h4>Schema</h4>

<p>It specifies the capabilities of the API and defines how clients can request the data.<br />
There are some special root types:  </p>
<pre><code>type Query { ... }
type Mutation { ... }
type Subscription { ... }
</code></pre>

<p>To enable the allPersons-query that we saw before, the Query type would have to be written as follows:  </p>
<pre><code>type Query {
  allPersons: [Person!]!
}
</code></pre>

<h4>Schema example</h4>

<pre><code class="js">type Query {
  allPersons(last: Int): [Person!]!
}

type Mutation {
  createPerson(name: String!, age: Int!): Person!
}

type Subscription {
  newPerson: Person!
}

type Person {
  name: String!
  age: Int!
  posts: [Post!]!
}

type Post {
  title: String!
  author: Person!
}
</code></pre>

<p>With the ideal declarative data fetching approach, a client shouldn’t be doing more than the following two steps:</p>
<ul>
<li>Describe data requirements  </li>
<li>Display data in UI  </li>
</ul>
<p>GraphQL client libraries like Relay or Apollo will enable you to do.<br />
They provide the abstraction that you need to be able to focus on the important parts of your application rather than having to deal with the repetitive implementation of infrastructure.  </p>
<hr />
<h4>Example 1</h4>

<h5>Frontend graphql query in react with Apollo</h5>

<pre><code class="js">npm install -g npx // (npx comes with npm 5.2+ and higher)
npx create-react-app react-graphql-test
npm start
</code></pre>

<p>Dependencies install  </p>
<pre><code class="js">npm install apollo-boost react-apollo graphql-tag graphql
</code></pre>

<p>apollo-boost: Package containing reccomended Apollo Client setup<br />
react-apollo: View layer integration for React<br />
graphql-tag: Necessary for parsing your GraphQL queries<br />
graphql: Also parses your GraphQL queries  </p>
<p>in App.js</p>
<pre><code class="js">import ApolloClient from &quot;apollo-boost&quot;;
const client = new ApolloClient({
  uri: &quot;[Insert URI of GraphQL endpoint]&quot;
});
</code></pre>

<p>Connect the instance of ApolloClient to the React app</p>
<pre><code class="js">import { ApolloProvider } from &quot;react-apollo&quot;;

...js
const App = () =&gt; (
  &lt;ApolloProvider client={client}&gt;
    &lt;div&gt;
      &lt;h2&gt;My first Apollo app&lt;/h2&gt;
    &lt;/div&gt;
  &lt;/ApolloProvider&gt;
);
</code></pre>

<p>Retrieve a list of Courses.<br />
Query component makes it extremely easy to embed the GraphQL query directly in the JSX code of the component.  </p>
<pre><code class="js">import React from 'react';
import { Query } from &quot;react-apollo&quot;;
import gql from &quot;graphql-tag&quot;;
const Courses = () =&gt; (
  &lt;Query
    query={gql`
      {
        allCourses {
          id
          title
          author
          description
          topic
          url
        }
      }
    `}
  &gt;
    {({ loading, error, data }) =&gt; {
      if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
      if (error) return &lt;p&gt;Error :(&lt;/p&gt;;
      return data.allCourses.map(({ id, title, author, description, topic, url }) =&gt; (
        &lt;div key={id}&gt;
          &lt;p&gt;{`${title} by ${author}`}&lt;/p&gt;
        &lt;/div&gt;
      ));
    }}
  &lt;/Query&gt;
);
export default Courses;
</code></pre>

<hr />
<h4>Example 2</h4>

<pre><code>https://www.howtographql.com/react-apollo/1-getting-started/
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Example 3 - GraphQL React Class Component</h4>

<p>getUsers.tsx</p>
<pre><code class="js">import gql from 'graphql-tag';

export const getUsers = gql'
  query users(userId : $userId) {
    userId
    name
    lastActive
    status
    teams {
      name
      role
    }
  }'
</code></pre>

<pre><code class="js">import { Query } from 'react-apollo'
import { getUsers } from 'utils/graphql/Queries'

export class Users extends React.PureComponent&lt;{}, IState&gt; {
  constructor(props: any) {
    super(props);
    this.state = {
      table: [{}],
      selectedUser : '',
      loading: 'init'
    }
  }

  public render(): any {
    if (this.state.loading == 'init') {
      return (
        &lt;div&gt;
          &lt;showLoader&gt;
        &lt;/div&gt;
      )
    } else {
      return (
        &lt;header&gt;page title&lt;/header&gt;
        &lt;div class='container'&gt;
          &lt;Query
            query={getUsers}
            variables={userId}
            pollInterval={refreshInterval}
          &gt;
            {({loading, error, data}) =&gt; {
              if (loading) {
                return &lt;div&gt;loading table message&lt;/div&gt;
              }
              if (error) {
                return &lt;div&gt;error message&lt;/div&gt;
              }
              // if data
              return &lt;div&gt;{this.setTableConent()}&lt;/div&gt;
            }
            }
          &lt;/Query&gt;
        &lt;/div&gt;
      )
    }
  }

}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Fake data with graphql-faker</h4>

<p>github: https://github.com/APIs-guru/graphql-faker</p>
<p>Install</p>
<pre><code class="js">npm install -g graphql-faker
</code></pre>

<p>Usage</p>
<pre><code class="js">graphql-faker [options] [SDL file]
</code></pre>

<p>Create a Graphql Faker Schema (schema.faker.graphql):</p>
<pre><code class="js">type Query {
  users(userId: ID!): [User]
}

type User {
  userId: ID! @fake(type: uuid),
  name: String @fake(type: name),
  teams: Team
}

type Team {
  name: String @fake(type: name)
  ipAddress: String @fake(type: ipv4Address)
}
</code></pre>

<h4>Setup package.json and webpack to run graphql faker local</h4>

<pre><code class="JSON">  &quot;scripts&quot;: {
    &quot;start:mock-graphql&quot;: &quot;./node_modules/graphql-faker ./schema.faker.graphql&quot;
  }
</code></pre>

<p>webpack.local.js</p>
<pre><code class="js">config.devServer = {
  hot: true,
  contentBase: './dist',
  headers: {
    &quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;,
  },
  proxy: {
    'api/v1/0000002929/graphql': {
      target: 'http:127.0.0.1:9002',
      pathRewrite: {'/api/rewrite/graphql': 'graphql'},
      changeOrigin: true
    }
  }
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Graphql Query types</h4>

<p>Query with a client object</p>
<pre><code class="js">export const checkCompanyNameExist = (client, name) =&gt; {
const IS_COMPANY_NAME_EXIST = `
    query {
      company(name: “Foo”) {
        name
    }
  }
`;

  return client.query({
    query: IS_COMPANY_NAME_EXIST,
    fetchPolicy: 'network-only',
    variables: { name }
  })
  .then(res =&gt; res.json())
  .then(console.log)
  .catch(console.error);
};
</code></pre>

<p>High Order Component with Apollo</p>
<pre><code class="js">import { withApollo } from 'react-apollo';

class SomeComponent extends React.Component {
  componentDidMount = async () =&gt; {
      const { client } = this.props;
      const res = await client.query({ query: SOME_QUERY });
      // ...
  }
  render() {
      // ...
  }
}
export default withApollo(SomeComponent);
</code></pre>

<p>Declarative Query</p>
<pre><code class="js">const GET_SELLER_PHOTO = gql`
  query seller($seller: String!) {
    seller(seller: $seller) {
      id
      image
    }
  }
`;

const SellerPhoto = ({ seller }) =&gt; (
  &lt;Query query={GET_SELLER_PHOTO} variables={{ seller }}&gt;
    {({ loading, error, data }) =&gt; {
      if (loading) return null;
      if (error) return `Something went wrong: ${error}`;

      return (
        &lt;img src={data.seller.image}/&gt;
      );
    }}
  &lt;/Query&gt;
);
</code></pre>

<p>React Hooks API</p>
<pre><code class="js">const GET_SELLER_PHOTO = gql`
  query seller($seller: String!) {
    seller(seller: $seller) {
      id
      image
    }
  }
`;

function SellerPhoto({ seller }) {
  const { loading, error, data } = useQuery(GET_SELLER_PHOTO, {
    variables: { seller }
  });

  if (loading) return null;
  if (error) return `Something went wrong: ${error}`;

  return (
    &lt;img src={data.seller.image} /&gt;
  );
}
</code></pre>

<p>Lazy loading query with Hooks API</p>
<pre><code class="js">const LazyQuery = () =&gt; {
  const [getNewUser, { loading, data }] = useLazyQuery(GET_NEW_USER);
  const { loading: loadingGetUsers, data: dataGetUsers } = useQuery(GET_USERS);

  if (loading) return 'Loading';
  if (loadingGetUsers) return 'Loading';

  if (dataGetUsers &amp;&amp; dataGetUsers.userID) {
    // ...
  }

  return (
    &lt;div&gt;
      {dataGetUSers.users}
      &lt;button onClick={() =&gt; getNewUser({ variables: { id: dataGetUsers.userID } })}&gt;
        Up new User
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<h4>Mutations</h4>

<p>Mutation with client</p>
<pre><code class="js">const mutateComment = client =&gt; {
  const mutation = gql`
  mutation AddComment($text: String!){
    addComment(text: $text) {
      id
      text
    }
  }
`;
  return client.mutate({
    variables: { text: 'hello' },
    mutation
  })
    .then((result) =&gt; { console.log(result); })
    .catch((error) =&gt; { console.log(error); });
};
</code></pre>

<p>Declarative Mutation</p>
<pre><code class="js">const ADD_SELLER = gql`
  mutation($type: String!) {
    addSeller(type: $type) {
      id
      type
    }
  }
`;

const addSeller = () =&gt; {
  let input;

  return (
    &lt;Mutation mutation={ADD_SELLER}&gt;
      {(addSellerName, { data }) =&gt; (
        &lt;div&gt;
          &lt;form
            onSubmit={(e) =&gt; {
              e.preventDefault();
              addSellerName({ variables: { type: input.value } });
              input.value = '';
            }}
          &gt;
            &lt;input
              ref={(node) =&gt; {
                input = node;
              }}
            /&gt;
            &lt;button type=&quot;submit&quot;&gt;Add Seller&lt;/button&gt;
          &lt;/form&gt;
        &lt;/div&gt;
      )}
    &lt;/Mutation&gt;
  );
};
</code></pre>

<p>Mutation with hook</p>
<pre><code class="js">const AddProduct = () =&gt; {
  const [productCreate] = useMutation(PRODUCT_CREATE);
  const { pathname } = useRouter();

  const onSubmit = (values, { setSubmitting, setErrors }) =&gt; {
    submitProductCreate(productCreate, values, setSubmitting, setErrors);
  };

  return &lt;ProductForm onSubmit={onSubmit} pathname={pathname} /&gt;;
};

export default AddProduct;
</code></pre>

<h4>Subscriptions</h4>

<p>Subscriptions with client</p>
<pre><code class="js">const subscriptionProduct = client =&gt; {
  const subscription = gql`
  subscription {
    products {
      id
      url
      description
      user {
       id
      }
    }
  }
`;

  return client.subscription({
    subscription
  })
    .then((result) =&gt; { console.log(result); })
    .catch((error) =&gt; { console.log(error); });
};
</code></pre>

<p>Declarative Subscriptions</p>
<pre><code class="js">const SubProductType = ({ idProduct }) =&gt; {
const SELLER_ON_PRODUCT_SUBSCRIPTION = gql`
  subscription {
    products {
      id
      description
      user {
       id
      }
    }
  }
`
  return (
&lt;Subscription
    subscription={SELLER_ON_PRODUCT_SUBSCRIPTION}
    variables={{ id: idProduct }}
    &gt;
    {({ data: { products }, loading, error }) =&gt; {
      if (loading) return 'loading';
      if (error) return 'error';

      return (
        &lt;h4&gt;{products.description}&lt;/h4&gt;
      );
    }}
  &lt;/Subscription&gt;
);
</code></pre>

<p>useSubscriptions Hook</p>
<pre><code class="js">const SubProductType = ({ idProduct }) =&gt; {
const SELLER_ON_PRODUCT_SUBSCRIPTION = gql`
  subscription {
    products {
      id
      description
      user {
       id
      }
    }
  }
`
  const {
    data: { products }, loading, error
  } = useSubscription(SELLER_ON_PRODUCT_SUBSCRIPTION, {
    variables: { id: idProduct }
  });

  if (loading) return 'loading';
  if (error) return 'error';

  return (
    &lt;h4&gt;{products.description}&lt;/h4&gt;
  );
};
</code></pre>

<h2 id="socket">SOCKET</h2>
<p>socket client</p>
<p>socket install </p>
<pre><code>npm i socket.io-client
</code></pre>

<pre><code class="js">const io = require('socket.io-client')('https://'.concat(document.domain).concat(':').concat(location.port));
export default io;
</code></pre>

<p>io Emit from client</p>
<pre><code class="js">import io from './components/common/io';
io.emit('populate_table', { table_name: 'users_table' });
</code></pre>

<p>io Receive</p>
<pre><code class="js">io.on('isloggedin', (payload) =&gt; {
  ...
}
</code></pre>

<p>Remove listeners</p>
<pre><code class="js">io.removeAllListeners('action_response');
</code></pre>

<p>socketio server flask</p>
<pre><code class="js">from app.server import socketio
@socketio.on(socket_names.UPLOAD_LICENSE)
def upload_license_action(args):
    &quot;&quot;&quot;
    Upload a new license file.
    &quot;&quot;&quot;
    data = args['data']
    uuid = args['uuid']
    sid = request.sid
    user_store.update_previous_connection(sid)
    socketio.emit(socket_names.ACTION_TIME, {
        'action_time': now(sid)}, room=sid)
    with thread_lock:
        socketio.start_background_task(
            target=upload_license,
            kwargs={'data': data, 'sid': sid, 'uuid': uuid})
</code></pre>

<hr />
<h2 id="css3sass">CSS3/SASS</h2>
<hr />
<h4>Links</h4>

<p>Styled Components:</p>
<p>https://dev.to/aromanarguello/how-to-use-themes-in-styled-components-49h</p>
<hr />
<h4>CSS Architecture</h4>

<hr />
<h4>SMACSS method consists on organizing CSS rules in five different categories:</h4>

<ul>
<li>Basic: Default elements styles. It doesn’t include any class or ID selectors.</li>
<li>Layout: It divides the content into sections (header, footer, primary content).</li>
<li>Module: Those components that can be reused. Modules sit inside Layout components.</li>
<li>State: The rules that establish the state of our modules. A state is something that augments and overrides all other styles.</li>
<li>Theme: It would allow the more visual aspects of the project.</li>
</ul>
<hr />
<h4>Display property</h4>

<ul>
<li>block: element starts on a new line and stretches out to the left and right as far as it can. </li>
<li>inline: element not on a new line and doesnt stretch.</li>
<li>inline-block: element can have width and height. </li>
<li>flex: Displays an element as a block-level flex container.</li>
<li>grid: Displays an element as a block-level grid container.</li>
<li>...</li>
</ul>
<h4>Position</h4>

<ul>
<li>static: is not positioned in any special way.</li>
<li>relative: the element is positioned relative to its normal position.</li>
<li>fixed - the element is positioned related to the browser window.</li>
<li>absolute - the element is positioned absolutely to its first positioned parent.</li>
</ul>
<h4>Box Model</h4>

<ul>
<li>Content: The content of the box, where text and images appear</li>
<li>Padding: Clears an area around the content. The padding is transparent</li>
<li>Border: A border that goes around the padding and content</li>
<li>Margin: Clears an area outside the border. The margin is transparent</li>
</ul>
<hr />
<h4>Formatting CSS - based on Airbnb style guide</h4>

<ul>
<li>Use soft tabs (2 spaces) for indentation.</li>
<li>Prefer dashes over camelCasing in class names.</li>
<li>Underscores and PascalCasing are okay if you are using BEM (see OOCSS and BEM below).</li>
<li>Do not use ID selectors.</li>
<li>When using multiple selectors in a rule declaration, give each selector its own line.</li>
<li>Put a space before the opening brace { in rule declarations.</li>
<li>In properties, put a space after, but not before, the : character.</li>
<li>Put closing braces } of rule declarations on a new line.</li>
<li>Put blank lines between rule declarations.</li>
<li>Prefer line comments (// in Sass-land) to block comments.</li>
</ul>
<p>Bad</p>
<pre><code class="css">.avatar{
    border-radius:50%;
    border:2px solid white; }
.no, .nope, .not_good {
    // ...
}
#lol-no {
  // ...
}
</code></pre>

<p>Good</p>
<pre><code class="css">.avatar {
  border-radius: 50%;
  border: 2px solid white;
}

.one,
.selector,
.per-line {
  // ...
}
</code></pre>

<h4>Use a combination of OOCSS and BEM</h4>

<ul>
<li>
<p>OOCSS, or “Object Oriented CSS”, is an approach for writing CSS that encourages you to think about your stylesheets as a collection of “objects”:<br />
reusable, repeatable snippets that can be used independently throughout a website.<br />
  It is based on two main principles:<br />
  a. Separate structure from skin<br />
  b. Separate containers from content (you should avoid using child selectors whenever it’s possible.)</p>
</li>
<li>
<p>BEM, or “Block-Element-Modifier”, is a naming convention for classes in HTML and CSS.  </p>
</li>
</ul>
<h4>Responsive Design</h4>

<h4>Defined by three characteristics</h4>

<ul>
<li>Flexible grid-based layout  </li>
<li>Media queries (CSS3)  </li>
<li>Images that resize  </li>
</ul>
<h4>Dev made Grids</h4>

<p><a href="https://css-tricks.com/dont-overthink-it-grids/">homemade grids guide</a></p>
<h4>FLEXBOX</h4>

<h4>Parent Flex Container</h4>

<pre><code class="css">display: flex | inline-flex;
flex-direction: row | row-reverse | column | columnreverse;
flex-wrap: wrap | nowrap | wrap-reverse; flex-flow (shorthand for flex-direction and flexwrap)
justify-content: flex-start | flex-end | center | spacebetween | space-around | space-evenly;
align-items: flex-start | flex-end | center | baseline | stretch;
align-content (cross axis - adjust to largest item): flex-start | flex-end | center | stretch | spacebetween | space-around;
</code></pre>

<h4>Children Flex Items</h4>

<pre><code class="css">order: &lt;integer&gt;;
flex-grow: &lt;number&gt;;
flex-shrink: &lt;number&gt;;
flex-basis: &lt;length&gt; | auto;
flex: shorthand for grow, shrink, and basis (default: 0 1 auto)
align-self: overrides alignment set on parent
</code></pre>

<h4>GRID</h4>

<h4>Grid Container</h4>

<pre><code class="css">display: grid | inline-grid;
grid-template-columns: &lt;track-size&gt; ... | &lt;line-name&gt; &lt;track-size&gt; ...;
grid-template-rows: &lt;track-size&gt; ... | &lt;line-name&gt; &lt;track-size&gt; ...;
grid-template-areas: &lt;grid-area-name&gt;;
grid-template: A shorthand for setting grid-template-rows, grid-template-columns, and grid-template-areas in a single declaration.
grid-column-gap: &lt;line-size&gt;;
grid-row-gap: &lt;line-size&gt;;
grid-gap: A shorthand for grid-row-gap and grid-column-gap
justify-items: start | end | center | stretch;
align-items: start | end | center | stretch;
place-items: place-items sets both the align-items and justify-items properties in a single declaration.
justify-content: start | end | center | stretch | space-around | space-between | space-evenly;  
align-content: start | end | center | stretch | space-around | space-between | space-evenly;
place-content: place-content sets both the align-content and justify-content properties in a single declaration.
grid-auto-columns: &lt;track-size&gt; ...;
grid-auto-rows: &lt;track-size&gt; ...;
grid-auto-flow: row | column | row dense | column dense
grid: A shorthand for setting all of the following properties in a single declaration: grid-template-rows, grid-template-columns, grid-template-areas, grid-auto-rows, grid-auto-columns, and grid-auto-flow
</code></pre>

<h4>Grid Items</h4>

<pre><code class="css">grid-column-start: &lt;number&gt; | &lt;name&gt; | span &lt;number&gt; | span &lt;name&gt; | auto
grid-column-end: &lt;number&gt; | &lt;name&gt; | span &lt;number&gt; | span &lt;name&gt; | auto
grid-row-start: &lt;number&gt; | &lt;name&gt; | span &lt;number&gt; | span &lt;name&gt; | auto
grid-row-end: &lt;number&gt; | &lt;name&gt; | span &lt;number&gt; | span &lt;name&gt; | auto
grid-column: &lt;start-line&gt; / &lt;end-line&gt; | &lt;start-line&gt; / span &lt;value&gt;;
grid-row: &lt;start-line&gt; / &lt;end-line&gt; | &lt;start-line&gt; / span &lt;value&gt;;
grid-area: &lt;name&gt; | &lt;row-start&gt; / &lt;column-start&gt; / &lt;row-end&gt; / &lt;column-end&gt;;
justify-self: start | end | center | stretch;
align-self: start | end | center | stretch;
place-self: center;
</code></pre>

<h4>Media Queries</h4>

<pre><code class="css">/* 
  ##Device = Desktops
  ##Screen = 1281px to higher resolution desktops
*/
@media (min-width: 1281px) {}
/* 
  ##Device = Laptops, Desktops
  ##Screen = B/w 1025px to 1280px
*/
@media (min-width: 1025px) and (max-width: 1280px) {}
/* 
  ##Device = Tablets, Ipads (portrait)
  ##Screen = B/w 768px to 1024px
*/
@media (min-width: 768px) and (max-width: 1024px) {}
/* 
  ##Device = Tablets, Ipads (landscape)
  ##Screen = B/w 768px to 1024px
*/
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {}
/* 
  ##Device = Low Resolution Tablets, Mobiles (Landscape)
  ##Screen = B/w 481px to 767px
*/
@media (min-width: 481px) and (max-width: 767px) {}
/* 
  ##Device = Most of the Smartphones Mobiles (Portrait)
  ##Screen = B/w 320px to 479px
*/
@media (min-width: 320px) and (max-width: 480px) {}
</code></pre>

<h4>BEM (Block Element Modifier)</h4>

<pre><code>&lt;div class=&quot;block__element block__element--modifier&quot;&gt;
  Hallo
&lt;/div&gt;
</code></pre>

<pre><code class="css">.block {
  &amp;__element {
    background: blue;
    &amp;--modifier {
      color: white;
    }
  }
}
</code></pre>

<h4>BEM with Sass</h4>

<pre><code class="css">.person {
  &amp;__hand {/* Styles */}

  &amp;__leg {/* Styles */}

  &amp;--male {
    /* Styles */

    &amp;__hand {
      /* Styles */

      &amp;--left {/* Styles */}

      &amp;--right {/* Styles */}
    }

    &amp;__leg {
      /* Styles */

      &amp;--left {/* Styles */}

      &amp;--right {/* Styles */}
    }
  }

  &amp;--female {
    /* Styles */

    &amp;__hand {
      /* Styles */

      &amp;--left {/* Styles */}

      &amp;--right {/* Styles */}
    }

    &amp;__leg {
      /* Styles */

      &amp;--left {/* Styles */}

      &amp;--right {/* Styles */}
    }
  }
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>CSS Grid vs Flexbox</h4>

<p><a href="https://medium.com/youstart-labs/beginners-guide-to-choose-between-css-grid-and-flexbox-783005dd2412">CSS grid vs flexbox</a>
- CSS Grid Layout is a two-dimensional system, meaning it can handle both columns and rows, unlike flexbox which is largely a one-dimensional system (either in a column or a row).
- A core difference between CSS Grid and Flexbox is that — CSS Grid’s approach is layout-first while Flexbox’ approach is content-first. 
- If you are well aware of your content before making layout, then blindly opt for Flexbox and if not, opt for CSS Grid.
- Flexbox layout is most appropriate to the components of an application (as most of them are fundamentally linear), and small-scale layouts, while the Grid layout is intended for larger scale layouts which aren’t linear in their design.
- If you only need to define a layout as a row or a column, then you probably need flexbox. If you want to define a grid and fit content into it in two dimensions — you need the grid.</p>
<p><br></p>
<hr />
<p><br></p>
<h4>Centering Things</h4>

<p><a href="https://css-tricks.com/centering-css-complete-guide/">csstricks centering complete guide</a></p>
<ul>
<li>Centering line of texts:  </li>
</ul>
<pre><code class="css">p { text-align: center }
</code></pre>

<ul>
<li>Centering a block or image:  </li>
</ul>
<pre><code class="css">p.blocktext {
    margin-left: auto;
    margin-right: auto;
    width: 8em
}
&lt;p class=&quot;blocktext&quot;&gt;
</code></pre>

<ul>
<li>Centering vertically:<br />
<a href="https://vanseodesign.com/css/vertical-centering/">centering 1</a>
<a href="https://www.w3schools.com/howto/howto_css_center-vertical.asp">centering 2 w3c</a>
The trick is to specify that the outer block is to be formatted as a table cell, because the contents of a table cell can be centered vertically.  </li>
</ul>
<pre><code class="css">DIV.container {
  min-height: 10em;
  display: table-cell;
  vertical-align: middle;
}

&lt;DIV class=&quot;container&quot;&gt;
  &lt;P&gt;This small paragraph
&lt;/DIV&gt;
</code></pre>

<p>center vertically ex. 2</p>
<pre><code class="css">    labelContainer: {
      display: 'table-cell',
      verticalAlign: 'middle',
      height: '30px',
    },
</code></pre>

<ul>
<li>Centering vertically CSS3:</li>
</ul>
<pre><code class="css">&lt;div class=container3&gt;
  &lt;p&gt;This paragraph…
&lt;/div&gt;

div.container3 {
  height: 10em;
  position: relative 
}
div.container3 p {
  margin: 0;
  position: absolute;
  top: 50%;
  transform: translate(0, -50%) 
}
</code></pre>

<ul>
<li>Centering with flex:</li>
</ul>
<pre><code class="css">div.container5 {
  height: 10em;
  display: flex;
  align-items: center 
}
div.container5 p {
  margin: 0 
}
</code></pre>

<ul>
<li>Centering horizontally and vertically with css level 3</li>
</ul>
<pre><code class="css">&lt;div class=container4&gt;
  &lt;p&gt;Centered!
&lt;/div&gt;

div.container4 {
  height: 10em;
  position: relative 
}

div.container4 p {
  margin: 0;
  background: yellow;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-right: -50%;
  transform: translate(-50%, -50%)
}
</code></pre>

<ul>
<li>Centering horizontally and vertically in flex</li>
</ul>
<pre><code class="css">div.container6 {
  height: 10em;
  display: flex;
  align-items: center;
  justify-content: center 
}
div.container6 p {
  margin: 0 
}
</code></pre>

<ul>
<li>Centering in the viewport in css 3</li>
</ul>
<pre><code class="css">&lt;html&gt;
  &lt;style&gt;
    body {
      background: white 
    }
    section {
      background: black;
      color: white;
      border-radius: 1em;
      padding: 1em;
      position: absolute;
      top: 50%;
      left: 50%;
      margin-right: -50%;
      transform: translate(-50%, -50%) 
    }
  &lt;/style&gt;
  &lt;section&gt;
    &lt;h1&gt;Nicely centered&lt;/h1&gt;
    &lt;p&gt;This text block is vertically centered.
    &lt;p&gt;Horizontally, too, if the window is wide enough.
  &lt;/section&gt;
</code></pre>

<hr />
<p><br><br></p>
<h4>Install SASS</h4>

<pre><code>$ npm install sass-loader node-sass --save-dev
</code></pre>

<h4>Update the webpack.config.js to chain sass-loader , then css-loader and then chain their output to style-loader (Loader-chaining)</h4>

<pre><code class="scss">Module:{
     Rules:[
             {
                 test:/\.(s*)css$/,
                 use:['style-loader','css-loader', 'sass-loader']
              }
      ]
   },
</code></pre>

<h4>SCSS Import</h4>

<pre><code class="scss">@import 'reset';
</code></pre>

<h4>SCSS Variables</h4>

<pre><code class="scss">$zHeader: 2000;
$zOverlay: 5000;
$zMessage: 5050;

.header {
  z-index: $zHeader;
}
.overlay {
  z-index: $zOverlay;
}
.message {
  z-index: $zMessage;
}
</code></pre>

<h4>SCSS Mixins</h4>

<pre><code class="scss">@mixin square($size, $color) {
  width: $size;
  height: $size;
  background-color: $color;
}

.small-blue-square {
  @include square(20px, rgb(0,0,255));
}

.big-red-square {
  @include square(300px, rgb(255,0,0));
}
</code></pre>

<h4>SCSS CrossBrowser Mixins</h4>

<pre><code class="scss">@mixin transform-tilt() {
  $tilt: rotate(15deg);
  -webkit-transform: $tilt; /* Ch &lt;36, Saf 5.1+, iOS, An =&lt;4.4.4 */
      -ms-transform: $tilt; /* IE 9 */
          transform: $tilt; /* IE 10, Fx 16+, Op 12.1+ */
}

.frame:hover { 
  @include transform-tilt; 
}
</code></pre>

<h4>SCSS Extend</h4>

<h4>Extending should be used when we need similarly styled elements, which still differ in some detail. </h4>

<pre><code class="scss">.dialog-button {
  box-sizing: border-box;
  color: #ffffff;
  box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.12);
  padding: 12px 40px;
  cursor: pointer;
}

.confirm {
  @extend .dialog-button;
  background-color: #87bae1;
  float: left;
}

.cancel {
  @extend .dialog-button;
  background-color: #e4749e;
  float: right;
}
</code></pre>

<h4>SCSS Nesting</h4>

<h4>Organize your stylesheet in a way that resembles the HTML more closely.</h4>

<pre><code class="scss">ul {
  list-style: none;

  li {
    padding: 15px;
    display: inline-block;

    a {
      text-decoration: none;
      font-size: 16px;
      color: #444;
    }
  }
}
</code></pre>

<h4>Nested Pseudo Classes and Pseudo Elements </h4>

<pre><code class="scss">.weather {
  @extend %module;
  @include transition(all 0.3s ease-out);
  background: LightCyan;
  &amp;:hover {
    background: DarkCyan;
  }
  &amp;::before {
    content: &quot;&quot;;
    display: block;
  }
  ...
}
</code></pre>

<h4>SCSS Operations  </h4>

<pre><code class="scss">$width: 800px;

.container { 
  width: $width;
}

.column-half {
  width: $width / 2;
}

.column-fifth {
  width: $width / 5;
}
</code></pre>

<h4>Selectors</h4>

<h4>Descendant Selector</h4>

<p>all p elements inside div elements </p>
<pre><code>div p {
  background-color: yellow;
}
</code></pre>

<h4>Child Selector</h4>

<p>all p elements that are immediate children of a div element  </p>
<pre><code>div &gt; p {
  background-color: yellow;
}
</code></pre>

<h4>Adjacent Sibling Selector</h4>

<p>all p elements that are placed immediately after div elements</p>
<pre><code>div + p {
  background-color: yellow;
}
</code></pre>

<h4>General Sibling Selector</h4>

<p>all p elements that are siblings of div elements</p>
<pre><code>div ~ p {
  background-color: yellow;
}
</code></pre>

<h4>Select p elements with class="center"</h4>

<pre><code>p.center 
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Box sizing</h4>

<p>The box-sizing property can make building CSS layouts easier and a lot more intuitive.<br />
padding and border add the width of an object.<br />
With box sizing the padding and border of that element no longer increase its width.</p>
<pre><code class="css">html {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
*, *:before, *:after {
  -webkit-box-sizing: inherit;
  -moz-box-sizing: inherit;
  box-sizing: inherit;
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="unit-testing">UNIT TESTING</h2>
<p>each test contains:<br>
- Setup phase (e.g. shallow component)<br>
- Action phase (e.g. setState)<br>
- Expect a certain outcome (e.g. expect modal to be rendered)<br>
<br>
Some notes:<br>
- Basic tests functionalities: <br>
  Component renders correctly<br>
  Subcomponents renders correctly<br>
  Fundamental elements of the pages are present (input fields, buttons, text)<br>
- Play with data:<br>
  Renders the component correct data, wrong data, no data<br>
  setState, setProps with different set of values<br>
- Verify communication with backed:<br>
  API endpoints<br>
  Forms send correct data<br>
- Verify Action<br>
  click buttons and expect an outcome<br>
  expect errors to be shown in the form<br></p>
<p><br></p>
<hr />
<p><br></p>
<h4>Reference Links</h4>

<p>https://devhints.io/enzyme@2<br>
https://alligator.io/react/testing-react-redux-with-jest-enzyme/<br>
https://dev.to/jhotterbeekx/testing-asynchronous-lifecycle-methods-with-jest-13jo<br>
https://github.com/JHotterbeekx/demo-jest-testing-with-async-lifecycle<br></p>
<p><br></p>
<hr />
<p><br></p>
<h4>Enzyme</h4>

<p>Enzyme is a JavaScript Testing utility created for react, maintained by Airbnb that makes it easier to assert, manipulate, and traverse your React Components' output.  </p>
<h4>Jest</h4>

<p>Jest is a test framework managed by Facebook. </p>
<p><br></p>
<hr />
<p><br></p>
<h4>Setup Jest and Enzyme example</h4>

<h4>install Jest</h4>

<pre><code>npm install -D jest
</code></pre>

<h4>Install enzyme</h4>

<p>Along with an Adapter corresponding to the version of react.  </p>
<pre><code>npm i --save-dev enzyme enzyme-adapter-react-16 enzyme-to-json
</code></pre>

<h4>Jest Setup with React</h4>

<pre><code>npm install --save-dev jest babel-jest babel-preset-env babel-preset-react react-test-renderer
</code></pre>

<h4>Configure Enzyme to work with Jest</h4>

<p>in <strong>tests</strong>/setup/setupEnzyme.js  </p>
<pre><code>import Enzyme from 'enzyme';
import Adapter from 'enzyme-adapter-react-16';

Enzyme.configure({ adapter: new Adapter() });
</code></pre>

<h4>Add into babel configuration</h4>

<pre><code class="json">&quot;env&quot;: {
  &quot;test&quot;: {
    &quot;presets&quot;: [&quot;es2015&quot;, &quot;react&quot;, &quot;stage-0&quot;]
  }
}
</code></pre>

<h4>Install Redux test helper</h4>

<pre><code>npm install -D redux-mock-store
</code></pre>

<h4>Run tests</h4>

<pre><code>// Single run
$ npm run test

// Watchmode
$ npm run test:watch
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>Wrapper Debug</h4>

<pre><code>console.log(wrapper.debug());
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.1 Test Component renders</h4>

<pre><code class="js">import React from 'react';
import { shallow } from 'enzyme';
import toJson from 'enzyme-to-json';
import configureStore from 'redux-mock-store'; // Smart components

// Component to be tested
import Menu from '../../components/Menu';

describe('&lt;Menu /&gt;', () =&gt; {
  describe('render()', () =&gt; {
    test('renders the component', () =&gt; {
      const wrapper = shallow(&lt;Menu /&gt;);
      const component = wrapper.dive();

      expect(toJson(component)).toMatchSnapshot();
    });
  });
});
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.2 Test Simulate Click</h4>

<p>Call the handler on simulate click and check function has been called.  </p>
<pre><code class="js">describe(&quot;&lt;Button /&gt;&quot;, () =&gt; {
  describe(&quot;onClick()&quot;, () =&gt; {
    test(&quot;successfully calls the onClick handler&quot;, () =&gt; {
      const mockOnClick = jest.fn();
      const wrapper = shallow(
        &lt;Button onClick={mockOnClick} label=&quot;Eat Food&quot; /&gt;
      );
      const component = wrapper.dive();
      component.find(&quot;button&quot;).simulate(&quot;click&quot;);
      expect(mockOnClick.mock.calls.length).toEqual(1);
    });
  });
});
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.3 Check Element contains correct formatted Value</h4>

<pre><code class="js">it(&quot;formats temp correctly&quot;, () =&gt; {
  // mount our Temperature component
  const wrapper = mount(
    &lt;Temperature temp={10} city=&quot;Toronto&quot; toggleForecast={() =&gt; {}} /&gt;
  );

  // extract the text from the LargeText styled component
  const text = wrapper.find(&quot;LargeText&quot;).text();

  // ensure it matches what is expected
  expect(text).toEqual(&quot;10°c&quot;);
});
</code></pre>

<p><br></p>
<p>--</p>
<p><br></p>
<h4>ex.4 Mocking the store with redux-mock-store</h4>

<p>redux-mock-store allows access to:</p>
<ul>
<li>dispatch()</li>
<li>getActions()</li>
<li>clearActions()</li>
</ul>
<pre><code class="js">import configureStore from 'redux-mock-store';

// Actions to be tested
import * as selectActions from '../../actions/select_actions';

const mockStore = configureStore();
const store = mockStore();

// ...
</code></pre>

<h4>Clear Actions</h4>

<pre><code class="js">//
describe(&quot;select_actions&quot;, () =&gt; {
  beforeEach(() =&gt; { // Runs before each test in the suite
    store.clearActions();
  });
  //
});
</code></pre>

<h4>Test Actions Dispatch</h4>

<pre><code class="js">describe('selectAvatar', () =&gt; {
  test('Dispatches the correct action and payload', () =&gt; {
    const expectedActions = [
      {
        'payload': 1,
        'type': 'select_avatar',
      },
    ];

    store.dispatch(selectActions.selectAvatar(1));
    expect(store.getActions()).toEqual(expectedActions);
  });
});
</code></pre>

<h4>Test Reducer</h4>

<pre><code class="js">// ...

describe('SELECT_AVATAR', () =&gt; {
  test('returns the correct state', () =&gt; {
    const action = { type: SELECT_AVATAR, payload: 1 };
    const expectedState = { selectedAvatar: 1 };

    expect(selectReducer(undefined, action)).toEqual(expectedState);
  });
});

// ...
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.5 Event Testing with Sinon</h4>

<pre><code class="js">it(&quot;calls toggleForecast on click&quot;, () =&gt; {
  // create a spy function
  const spy = sinon.spy();
  // pass spy function as our toggleForecast prop
  const wrapper = mount(
    &lt;Temperature temp={10} city=&quot;Toronto&quot; toggleForecast={spy} /&gt;
  );

  // find the first div and simulate a click event on it
  wrapper
    .find(&quot;div&quot;)
    .first()
    .simulate(&quot;click&quot;);

  // ensure that our spy (toggleForecast) was called when click was simulated
  expect(spy.calledOnce).toBe(true);
});
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.6 Testing a React Component</h4>

<pre><code class="javascript">import configureStore from 'redux-mock-store';
import { shallow } from 'enzyme';
import { shallowWithIntl, loadTranslationObject } from 'enzyme-react-intl';
import toJson from 'enzyme-to-json';
import renderer from 'react-test-renderer';
import translations from '../src/translations/en.json';
import io from '../src/components/common/io';

loadTranslationObject(translations);

const initialState = {
  open: false,
  errors: [],
  elements: [
    {
      id: '0x00000000001',
      size: '300000',
      cache_size: '256',
      state: 'online',
    },
    {
      id: '0x00000000002',
      size: '2000',
      cache_size: '128',
      state: 'offline',
    }
  ]
}
const mockStore= configureStore();
let store;
let wrapper;
let instance;
beforeEach(() =&gt; {
  store = mockStore(initialState);
  wrapper = shallowWithIntl(&lt;Raids store={store} {...defaultProps} /&gt;).shallow().dive();
  instance = wrapper.instance();
});

describe('Check Initial State', () =&gt; {
  it('Open set to false', () =&gt; {
    expect(wrapper.state('open')).toBe(false);
  });
  it('Errors set to empty array', () =&gt; {
    expect(wrapper.state('errors')).toEqual([]);
  });
});

describe('Simulate Events', () =&gt; {
  it('Calls checkErrors on button click', () =&gt; {
    wrapper.instance().checkErrors = jest.fn();
    wrapper.find('.buttonSubmit').simulate('click');
    expect(wrapper.instance().checkErrors).toHaveBeenCalled();
  });
});

describe('Component Methods', () =&gt; {
  it('Tests state value after calling method', () =&gt; {
    const expectedValue = 'AAAAAAAAAA';
    instance.selectName(expectedValue);
    expect(wrapper.state(['elementName'])).toBe(expectedValue);
  });
});

describe('Snapshots tests', () =&gt; {
  it('Tests component rendering snapshot', () =&gt; {
    expect(toJson(wrapper)).toMatchSnapshot();
  });
  it('DisplayErrors match snapshot', () =&gt; {
    const instance = wrapper.instance();
    const displayErrors = instance.displayErrors();
    const errorRender = renderer.create(displayErrors).toJSON();
    expect(errorRender).toMatchSnapshot();
  });
});

describe('Component Rendering', () =&gt; {
  it('Renders header', () =&gt; {
    const header = wrapper.find('ModalHeader').exists();
    expect(header).toBe(true);
  });
  it('Renders content', () =&gt; {
    const content = wrapper.find('ModalContent').exists();
    expect(content).toBe(true);
  });
  it('Renders actions', () =&gt; {
    const actions = wrapper.find('ModalActions').exists();
    expect(actions).toBe(true);
  });
});

describe('Emit data check', () =&gt; {
  const emit = jest.spyOn(io, 'emit');
  it('Submit form with correct data', () =&gt; {
    instance.createElement();
    const uuid = expect.any(String);
    expect(emit).toHaveBeenCalledWith('action', { elements: [elementInfo], action_type: 'create_element', uuid });
  });
});

</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex. 7 Testing with Moxios</h4>

<pre><code class="js">import thunk from 'redux-thunk';
import configureMockStore from 'redux-mock-store';
import moxios from 'moxios';
import { loadSpsData, loadSpsDataSuccess } from '../../../actions/SpActions';

export const startState = {}
const middleware = [thunk];
export const mockStore = configureMockStore(middleware)

describe('loadSpsData', () =&gt; {

  beforeEach(function () {
    moxios.install()
  });

  afterEach(function () {
    moxios.uninstall()
  });

  it('calls loadSpsData', async () =&gt; {
    const expected_url = 'http://localhost:8080/resource/location';
    const SpsData = {
      data: {
        sp: {
          items: {}
        },
      }
    }
    const store = mockStore();
    let request_url = '';
    moxios.wait(() =&gt; {
      const request = moxios.requests.mostRecent();
      request.respondWith({
        status: 200,
        response: SpsData
      })
      request_url = request.url;
    })

    const expected = loadSpsDataSuccess(SpsData)

    await store.dispatch(loadSpsData()).then(() =&gt; {
      const action = store.getActions();

      const type = action[0].type;
      expect(type).toEqual(expected.type);

      const data = action[0][&quot;spsData&quot;];
      expect(data).toEqual(expected.spsData);

      expect(request_url).toEqual(expected_url);
    });
  })
});

</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.8 Testing components wrapped in HOC</h4>

<p><a href="https://github.com/airbnb/enzyme/issues/539">Testing components wrapped in HOC</a></p>
<p><br></p>
<hr />
<p><br></p>
<h4>ex.9 Test asynchronous callback</h4>

<pre><code class="js">import React from &quot;react&quot;;
import DataRetriever from &quot;./DataRetriever&quot;;

export default class DataDisplayer extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      dataAvailable: false,
      data: null
    };
  }

  componentDidMount() {
    new DataRetriever().Retrieve(title =&gt; {
      this.setState({
        dataAvailable: true,
        data: title
      });
    });
  }

  render() {
    if (!this.state.dataAvailable) return &lt;div&gt;Data not available&lt;/div&gt;;
    return (
      &lt;div&gt;
        Data value: &lt;strong&gt;{this.state.data}&lt;/strong&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>

<h4>DataRetriever</h4>

<pre><code class="js">export default class DataRetriever {

  // This demo method calls an open API, then translates the response to JSON. Once that is done
  // it calls the passed in callbackMethod with the title property as parameter. So when the API
  // gives us { title: 'myTitle' }, the code will perform callbackMethod('myTitle')
  Retrieve(callbackMethod) {
    fetch(&quot;https://jsonplaceholder.typicode.com/todos/1&quot;)
      .then(response =&gt; {
        return response.json();
      })
      .then(responseJson =&gt; callbackMethod(responseJson.title));
  }
}
</code></pre>

<h4>Mock DataRetriever implementation with Jest</h4>

<pre><code class="js">it(&quot;Should show the data, When retrieved&quot;, () =&gt; {
  DataRetriever.mockImplementation(() =&gt; {
    return {
      Retrieve: (callback) =&gt; callback(&quot;fakeTitle&quot;)
    }
  });

  var wrapper = mount(&lt;DataDisplayer /&gt;);
  expect(wrapper.text()).toContain(&quot;fakeTitle&quot;);
});
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.10 Retrieve Data with async await</h4>

<pre><code class="js">import RetrieveData from &quot;./DataRetriever&quot;;
...

  async componentDidMount () {
    const title = await RetrieveData();
    if(title){
      this.setState({
        dataAvailable: true,
        data: title
      });
    }
  }
</code></pre>

<h4>Data Retriever</h4>

<pre><code class="js">export default RetrieveData() =&gt; {
  const todoData = await fetch(&quot;https://jsonplaceholder.typicode.com/todos/1&quot;);
  const todoDataJson = await todoData.json();
  return todoDataJson.title;
}
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h4>ex.10 Retrieve Data with Promise</h4>

<pre><code class="js">  async componentDidMount () {
    RetrieveData().then(title =&gt; {
          if(title){
            this.setState({
              dataAvailable: true,
              data: title
            });
          }
        });
  }
</code></pre>

<h4>Retrieve Data</h4>

<pre><code class="js">export default () =&gt; {
  return fetch(&quot;https://jsonplaceholder.typicode.com/todos/1&quot;)
    .then(response =&gt; {
      return response.json();
    })
    .then(responseJson =&gt; responseJson.title);
}
</code></pre>

<h4>Component test async/await or promise</h4>

<pre><code class="js">import React from &quot;react&quot;;
import { shallow } from &quot;enzyme&quot;;
import DataDisplayer from &quot;./DataDisplayer&quot;;

import * as DataRetriever from &quot;./DataRetriever&quot;;
DataRetriever.default = jest.fn();

describe(&quot;DataDisplayer&quot;, () =&gt; {
  beforeEach(() =&gt; {
    DataRetriever.default.mockClear();
  });
});

  it(&quot;Should show the data, When retrieved&quot;, async () =&gt; {
    DataRetriever.default.mockResolvedValue('fakeTitle');

    var wrapper = shallow(&lt;DataDisplayer /&gt;);
    const instance = wrapper.instance();
    await instance.componentDidMount();
    expect(wrapper.text()).toContain(&quot;fakeTitle&quot;);
  });

  it(&quot;Should show not available, When data has not been retrieved&quot;, async () =&gt; {
    DataRetriever.default.mockResolvedValue(undefined);

    var wrapper = shallow(&lt;DataDisplayer /&gt;);
    const instance = wrapper.instance();
    await instance.componentDidMount();
    expect(wrapper.text()).toContain(&quot;not available&quot;);
</code></pre>

<p><br></p>
<hr />
<p><br></p>
<h2 id="cypress">CYPRESS</h2>
<p>Install Cypress</p>
<pre><code class="js">npm install cypress --save-dev
</code></pre>

<p>in package.json</p>
<pre><code class="json">&quot;scripts&quot;: {
  &quot;cypress:dashboard&quot;: &quot;./node_modules/.bin/cypress open --project test&quot;,
  &quot;cypress&quot;: &quot;./node_modules/.bin/cypress run --project test --reporter junit --reporter-options mochaFile=results/componentTestResult[hash]{$(date +%F_%T)}.xml, toConsole=trueS&quot;
}
</code></pre>

<p>in a .js file into test/cypress folder:</p>
<p>example to validate a component</p>
<p>defining xpath/data-object-id and constants values:</p>
<pre><code class="js">const ADD_BUTTON = &quot;[data-object-id=\&quot;AddBtn\&quot;]&quot;
const USER_EMAIL = &quot;user001@gmail.com&quot;

function click_save() {
  cy.xpath(BUTTONS_CONTAINER)
    .within(() =&gt; {
      cy.xpath('/button[1]')
        .contains('Save')
        .should('not.be.disabled')
        .click()
    })
}

describe('Component tests', () =&gt; {
  beforeEach(() =&gt; {
    cy.visit('/account');
  })

  it('loads successfully page', () =&gt; {
    cy.xpath(MAIN_XPATH)
      .should('exist')
      .and('not.be.empty');

    cy.xpath(MAIN_XPATH).within(() =&gt; {
      cy.xpath('./header')
        .should('have.text', 'Account')
    })
  })

  it('creates a new account', () =&gt; {
    cy.get(ADD_BUTTON).click()

    cy.xpath(MAIN_FORM).within(() =&gt; {
      cy.xpath(INPUT_FIELD).type(USER_EMAIL)

      cy.wait(5000)
      click_save();
    })
  })


})
</code></pre>

<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
  <li class="last-updated-holder displayDate loading">
    <span class="last-updated-text">Last updated:</span>
    <time role="presentation" datetime="2018-10-25T00:00:00.000Z" data-article-date-source="ms.date"></time>
  </li>
<!--
  <li class="readingTime">
    2 minutes to read
  </li>
-->
  <li class="contributors-holder">
    <span class="contributors-text">Contributors</span>
    <ul class="contributors" data-bi-name="contributors"></ul>
  </li>
</ul>
</div>
        <div class="col-md-3"><div class="navbar-light navbar-expand-md hidden-print sticky-top sticky-offset" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    <div id="toc-collapse" class="navbar-collapse collapse card">
        <ul class="nav flex-column bs-sidenav">
            <li class="nav-item main"><a class="nav-link" href="#javascript">JAVASCRIPT</a></li>
                <li class="nav-item">
                    <a href="#how-it-works" class="nav-link">how it works</a>
                </li>
                <li class="nav-item">
                    <a href="#scopes" class="nav-link">Scopes</a>
                </li>
                <li class="nav-item">
                    <a href="#closures" class="nav-link">Closures</a>
                </li>
                <li class="nav-item">
                    <a href="#promises" class="nav-link">Promises</a>
                </li>
                <li class="nav-item">
                    <a href="#callback" class="nav-link">Callback</a>
                </li>
                <li class="nav-item">
                    <a href="#http-requests" class="nav-link">Http Requests</a>
                </li>
                <li class="nav-item">
                    <a href="#prototypes" class="nav-link">Prototypes</a>
                </li>
                <li class="nav-item">
                    <a href="#es6-syntax" class="nav-link">ES6 Syntax</a>
                </li>
                <li class="nav-item">
                    <a href="#this" class="nav-link">This</a>
                </li>
                <li class="nav-item">
                    <a href="#objects" class="nav-link">Objects</a>
                </li>
                <li class="nav-item">
                    <a href="#design-patterns" class="nav-link">Design Patterns</a>
                </li>
                <li class="nav-item">
                    <a href="#es6" class="nav-link">ES6</a>
                </li>
                <li class="nav-item">
                    <a href="#typescript" class="nav-link">TYPESCRIPT</a>
                </li>
                <li class="nav-item">
                    <a href="#utilities" class="nav-link">Utilities</a>
                </li>
                <li class="nav-item">
                    <a href="#graphql" class="nav-link">GRAPHQL</a>
                </li>
                <li class="nav-item">
                    <a href="#socket" class="nav-link">SOCKET</a>
                </li>
                <li class="nav-item">
                    <a href="#css3sass" class="nav-link">CSS3/SASS</a>
                </li>
                <li class="nav-item">
                    <a href="#unit-testing" class="nav-link">UNIT TESTING</a>
                </li>
                <li class="nav-item">
                    <a href="#cypress" class="nav-link">CYPRESS</a>
                </li>
        </ul>
    </div>
</div></div>
      </div>
      </div>
      
      <footer class="col-md-12">
	<hr>
	<div class="container">
	</div>
      </footer>
      <script>
	var base_url = "..",
            shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
      </script>
      <script src="../js/base.js" defer></script>
      <script src="../search/main.js" defer></script>
      
      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
      
    </body>
</html>
